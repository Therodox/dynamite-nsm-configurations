- pipeline.id: beats_pipeline
  config.string: |
    input {
      kafka {
        bootstrap_servers => "${ELASTIFLOW_KAFKA_SERVER:localhost:9092}"
        topics => ["${ELASTIFLOW_KAFKA_EVENT_TOPIC:raw-logs}"]
        codec => json
      }
    }
    filter {
       ruby {
         code => "event.set('[event_type]', event.get('[log][file][path]').split('/').last.split('.').first)"
       }
    }
    output {
      if[event_type] != "eve" {
         pipeline { send_to => elastiflow }
      }
      else {
        pipeline { send_to => synesis }
      }
    }

- pipeline.id: elastiflow_pipeline
  path.config: "/etc/dynamite/logstash/elastiflow/conf.d/*.conf"

- pipeline.id: synesis_pipeline
  path.config: "/etc/dynamite/logstash/synesis/conf.d/*.conf"